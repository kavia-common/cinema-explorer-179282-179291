{"is_source_file": true, "format": "JavaScript", "description": "This file provides a client wrapper for the TMDB (The Movie Database) API, including configuration, authentication helpers, image URL builder, and functions for searching movies, fetching movie details, and trending/featured movies.", "external_files": ["fetch", "process.env", "URL", "URLSearchParams", "console", "Error"], "external_methods": ["fetch", "console.warn", "JSON.parse"], "published": ["TMDB_CONFIG", "buildImageUrl", "fetchMovies", "searchMovies", "fetchMovieDetails", "getTrending", "getFeatured"], "classes": [], "methods": [{"name": "isV4Token(key)", "description": "Checks if a given token is a TMDB v4 JWT token, identified by starting with 'eyJ'.", "scope": "", "scopeKind": ""}, {"name": "getAuthForKey(key)", "description": "Builds authorization headers and query parameters based on whether the key is a v4 JWT token or a v3 API key.", "scope": "", "scopeKind": ""}, {"name": "computeStaticHeaders(key)", "description": "Computes static headers for requests, including Authorization for v4 tokens.", "scope": "", "scopeKind": ""}, {"name": "appendParams(search, params)", "description": "Appends given parameters to a URLSearchParams object, skipping undefined, null, or empty string values.", "scope": "", "scopeKind": ""}, {"name": "apiGet(path, params = {})", "description": "Performs a GET request to the TMDB API with proper auth, error, and rate limit handling.", "scope": "", "scopeKind": ""}, {"name": "buildImageUrl(path, size = 'w342')", "description": "Builds a full image URL for a given TMDB image path, or returns a placeholder if none provided.", "scope": "", "scopeKind": ""}, {"name": "shapePaged(payload)", "description": "Shapes the API response into a consistent paginated result with results, page, and total_pages.", "scope": "", "scopeKind": ""}, {"name": "fetchMovies({ query, page = 1 })", "description": "Searches TMDB movies based on a query string with optional pagination.", "scope": "", "scopeKind": ""}, {"name": "searchMovies(query, page = 1)", "description": "Alias for fetchMovies for backward compatibility.", "scope": "", "scopeKind": ""}, {"name": "fetchMovieDetails(movieId)", "description": "Fetches detailed information for a specific movie by its ID.", "scope": "", "scopeKind": ""}, {"name": "getTrending(period = 'day', page = 1)", "description": "Retrieves currently trending movies for a given period ('day' or 'week').", "scope": "", "scopeKind": ""}, {"name": "getFeatured(page = 1)", "description": "Retrieves popular movies to serve as featured content.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "console.warn", "JSON.parse", "fetch", "console.warn", "JSON.parse", "fetch", "JSON.parse", "fetch", "JSON.parse", "fetch", "JSON.parse"], "search-terms": ["TMDB_API_BASE", "TMDB_API_KEY", "createImageUrl", "searchMovie", "getMovieDetails", "trendingMovies", "popularMovies", "API", "fetch", "buildImageUrl", "search", "movie"], "state": 2, "file_id": 19, "knowledge_revision": 52, "git_revision": "", "revision_history": [{"48": ""}, {"52": ""}], "ctags": [{"_type": "tag", "name": "API_KEY", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^  API_KEY: TMDB_API_KEY,$/", "language": "JavaScript", "kind": "property", "scope": "TMDB_CONFIG", "scopeKind": "class"}, {"_type": "tag", "name": "Accept", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^  const h = { Accept: 'application\\/json' };$/", "language": "JavaScript", "kind": "property", "scope": "computeStaticHeaders.h", "scopeKind": "class"}, {"_type": "tag", "name": "Accept", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^  const headers = { Accept: 'application\\/json' };$/", "language": "JavaScript", "kind": "property", "scope": "getAuthForKey.headers", "scopeKind": "class"}, {"_type": "tag", "name": "BASE_URL", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^  BASE_URL: TMDB_API_BASE,$/", "language": "JavaScript", "kind": "property", "scope": "TMDB_CONFIG", "scopeKind": "class"}, {"_type": "tag", "name": "IMAGE_BASE", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^export const IMAGE_BASE = 'https:\\/\\/image.tmdb.org\\/t\\/p\\/w342';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "TMDB_API_BASE", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^const TMDB_API_BASE = 'https:\\/\\/api.themoviedb.org\\/3';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "TMDB_API_KEY", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^const TMDB_API_KEY = process.env.REACT_APP_TMDB_API_KEY;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "TMDB_CONFIG", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^export const TMDB_CONFIG = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "apiGet", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^async function apiGet(path, params = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, params = {})"}, {"_type": "tag", "name": "appendParams", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^function appendParams(search, params) {$/", "language": "JavaScript", "kind": "function", "signature": "(search, params)"}, {"_type": "tag", "name": "buildImageUrl", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^export function buildImageUrl(path, size = 'w342') {$/", "language": "JavaScript", "kind": "function", "signature": "(path, size = 'w342')"}, {"_type": "tag", "name": "computeStaticHeaders", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^function computeStaticHeaders(key) {$/", "language": "JavaScript", "kind": "function", "signature": "(key)"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^    data = { message: text || 'Unknown error' };$/", "language": "JavaScript", "kind": "class", "scope": "apiGet", "scopeKind": "class"}, {"_type": "tag", "name": "fetchMovieDetails", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^export async function fetchMovieDetails(movieId) {$/", "language": "JavaScript", "kind": "function", "signature": "(movieId)"}, {"_type": "tag", "name": "fetchMovies", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^export async function fetchMovies({ query, page = 1 }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ query, page = 1 })"}, {"_type": "tag", "name": "getAuthForKey", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^function getAuthForKey(key) {$/", "language": "JavaScript", "kind": "function", "signature": "(key)"}, {"_type": "tag", "name": "getFeatured", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^export async function getFeatured(page = 1) {$/", "language": "JavaScript", "kind": "function", "signature": "(page = 1)"}, {"_type": "tag", "name": "getTrending", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^export async function getTrending(period = 'day', page = 1) {$/", "language": "JavaScript", "kind": "function", "signature": "(period = 'day', page = 1)"}, {"_type": "tag", "name": "h", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^  const h = { Accept: 'application\\/json' };$/", "language": "JavaScript", "kind": "class", "scope": "computeStaticHeaders", "scopeKind": "class"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^  const headers = { Accept: 'application\\/json' };$/", "language": "JavaScript", "kind": "class", "scope": "getAuthForKey", "scopeKind": "class"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^  headers: computeStaticHeaders(TMDB_API_KEY),$/", "language": "JavaScript", "kind": "property", "scope": "TMDB_CONFIG", "scopeKind": "class"}, {"_type": "tag", "name": "isV4Token", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^function isV4Token(key) {$/", "language": "JavaScript", "kind": "function", "signature": "(key)"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^    data = { message: text || 'Unknown error' };$/", "language": "JavaScript", "kind": "property", "scope": "apiGet.data", "scopeKind": "class"}, {"_type": "tag", "name": "searchMovies", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^export async function searchMovies(query, page = 1) {$/", "language": "JavaScript", "kind": "function", "signature": "(query, page = 1)"}, {"_type": "tag", "name": "shapePaged", "path": "/home/kavia/workspace/code-generation/cinema-explorer-179282-179291/react_frontend/src/lib/tmdbClient.js", "pattern": "/^function shapePaged(payload) {$/", "language": "JavaScript", "kind": "function", "signature": "(payload)"}], "hash": "2d54721cccbb7083129aa489d0c57a70", "format-version": 4, "code-base-name": "react_frontend", "filename": "react_frontend/src/lib/tmdbClient.js", "fields": [{"name": "API_KEY: TMDB_API_KEY,", "scope": "TMDB_CONFIG", "scopeKind": "class", "description": "unavailable"}, {"name": "const h = { Accept: 'application\\/json' };", "scope": "computeStaticHeaders.h", "scopeKind": "class", "description": "unavailable"}, {"name": "const headers = { Accept: 'application\\/json' };", "scope": "getAuthForKey.headers", "scopeKind": "class", "description": "unavailable"}, {"name": "BASE_URL: TMDB_API_BASE,", "scope": "TMDB_CONFIG", "scopeKind": "class", "description": "unavailable"}, {"name": "headers: computeStaticHeaders(TMDB_API_KEY),", "scope": "TMDB_CONFIG", "scopeKind": "class", "description": "unavailable"}, {"name": "data = { message: text || 'Unknown error' };", "scope": "apiGet.data", "scopeKind": "class", "description": "unavailable"}]}